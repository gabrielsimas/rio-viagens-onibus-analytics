version: 2

models:
  - name: silver_pluviometria
    description: "Tabela de pluviometria tratada com classificação de intensidade de chuva e integração com estações."
    columns:
      - name: id
        description: "Chave primária da medição (PK original da Bronze convertida para string)."
        tests:
          - unique
          - not_null
      - name: nome_estacao
        description: "Nome amigável da estação meteorológica obtido via join com a tabela de estações."
      - name: acumulado_1h
        description: "Volume de chuva acumulado na última hora em mm. Valores nulos foram convertidos para 0.0."
      - name: tipo_chuva
        description: "Classificação categórica da intensidade (Fraca - Entre 0 e 5 mm/h, Moderada - entre 5 mm/h e 25 mm/h, Forte - Entre 25,1 mm/h e 50 mm/h, Muito Forte - acima de 50 mm/h)."
      - name: flag_chuva
        description: "Indicador binário: 1 para presença de chuva (acumulado > 0) e 0 para tempo seco."
      - name: horario
        description: "Horário exato da medição."
      - name: data_particao
        description: "Data de referência da partição do dado no Lakehouse."

  - name: silver_viagens_onibus
    description: "Tabela tratada de viagens de ônibus com enriquecimento temporal para análise de demanda e consistência."
    columns:
      - name: id_viagem
        description: "Identificador único da viagem."
        tests:
          - unique
          - not_null
      - name: consorcio
        description: "Consórcio responsável pela operação."
      - name: linha
        description: "Serviço/Linha do ônibus (ex: 457, 309)."
      - name: data_hora_partida
        description: "Timestamp de início da viagem."
        tests:
          - not_null
      - name: is_final_de_semana
        description: "Flag booleano indicando se a viagem ocorreu no Sábado (7) ou Domingo (1)."
      - name: hora_inicio_viagem
        description: "Hora inteira (0-23) do início da viagem. Usado para análise de picos."
      - name: tempo_viagem_informado_min
        description: "Tempo de viagem vindo da fonte original (GPS)."
      - name: tempo_viagem_calculado_min
        description: "Tempo de viagem recalculado (Chegada - Partida). Discrepâncias aqui indicam erro de registro."
